<!DOCTYPE html>
<html>
<head>
    <title>Â±ÄÂüüÁΩë‰º†Ëæì</title>
    <link rel='stylesheet' href='/stylesheets/font.css'/>
    <link rel="stylesheet" href="/stylesheets/file.css">
    <link rel="stylesheet" id='view' href="/stylesheets/<%= view %>.css">
    <link rel="stylesheet" href="/stylesheets/iconfont/icons.css">
    <link rel="stylesheet" href="/stylesheets/upload.css">


</head>

<body>
    
    <script src='/js/iconfont.js'></script>
    <script src='/js/uploadSetting.js'></script>


<!--Êñá‰ª∂Â§πÊòæÁ§∫ÊïàÊûú-->
<!-- test:D:\\All Local Downloads\\MobileFile -->

    <section class="upload-container" style="visibility: hidden;">
        <div id="uploadNav">
            <div id="closeUploadButton" onclick="visible()">
                <img src="/images/svg/closeButton.svg">
            </div>
        </div>
        
        <form ref='uploadForm' action="/upload" id='uploadForm' method='post' encType="multipart/form-data">
            <div class="drop-zone">
                <div class="icon-container">
                    <img src="/images/svg/uploadFile.svg" draggable="false" class="center" alt="File Icon">
                </div>

                <input type="file" name="Files" id="fileInput" multiple="multiple">
                <input type='submit' value='Upload!' id="fileUpload">

                <div class="title">Drop your Files here or, <span id="browseBtn">browse</span></div>
            </div>
        </form>

    </section>

 <div id="nav">kechuanÁöÑÊñá‰ª∂ÂàÜ‰∫´È°µÈù¢</div>

 <!-- TODO:Admin‰∏ãÁöÑÂà†Èô§ÂäüËÉΩ/ÈÄöËøá::before ::afterÂÆûÁé∞ÂõæÁâáÊú™Âä†ËΩΩÁöÑÂ§ÑÁêÜ <br>
 /ÁªßÊâøÂàáÊç¢ËßÜÂõæÂêéÁöÑscrollview‰ΩçÁΩÆ -->
 <div id="path">
    <!-- (ÂΩìÂâçÂàÜÂâ≤Á¨¶:<%=filepath.split('\\').length-2%> <%=filepath.split('\\')%>) -->
    <a href="/file" id='menu'>Indexüè†</a>
    <ul>
        <% for(var i=0; i<= filepath.split('\\').length-2; i++){ %> 
            <li>
                <%var array = []; var string = []%>

                <a href="http://<%= dataip %>/filelist?path=<% for(var j=0; j<=i; j++){%><%array.push(filepath.split('\\')[j])%><%string.push(array);string.join('\\')%><%}%><%=string[i].toString().replace(/\,/g,'\\')%>"><%= array[i] %>                  
                </a>
            </li>
            
            <div id="text">/</div> 
        <%}%>
    </ul>
 </div> 
<div id="gap"></div>

<div id="list">
    <div id="files">
    <!-- Êñá‰ª∂Â§πÊòæÁ§∫ -->
        <ul id='information'>
            <li id='name'></li>
            <li id='size'></li>
        </ul>

        <ul id='dirlist'>
            <!-- Ê†πÊçÆindex.jsËé∑ÂèñÁöÑÊï∞ÁªÑÈïøÂ∫¶ËøîÂõûÊñá‰ª∂ÂàóË°® -->
            <% for(var i=0; i<= dirlist.length-1; i++){ %>
                <a href="http://<%= dataip %>/filelist?path=<%= dirlist[i] %>" class="folder" >
                    <svg class="icons" aria-hidden="true">
                      <use xlink:href="#directory_md"></use>
                    </svg>

                    <li class="folder">  
                        <div class="dirname"><%= dirnamelist[i] %></div>
                        <div class="filesize">‚Äî</div>   
                    </li>
                </a>
                    
            <%}%>
        </ul>

    <!--Êñá‰ª∂ÊòæÁ§∫-->
        <ul id='filelist'>
            <% for(var i=0; i<= filelist.length-1; i++){ %>
                <a href="http://<%= dataip %>/filedownload?path=<%= filelist[i] %>" class="folder"> 
                    <svg class="icons" aria-hidden="true">
                        <%#var filename = decodeURIComponent(filelist[i])%>
                        <%var video_fliter = /\.mkv|mp4|flv|webv|m2ts|rmvb$/%>
                        <%var audio_fliter = /\.mp3|aac|flac|ogg|opus|aiff|alac$/%>
                        <%var picture_fliter = /\.jpe?g|png|bmp|webp$/%>
                        <%var compress_fliter = /\.zip|rar|7z|\d{2}$/%>
                        <%var text_fliter = /\.txt|md|lrc|ini|json|cfg$/%>

                        <use xlink:href="
                            <%if(video_fliter.test(extlist[i])){%>
                            <%="#ext-video"%>
                            <%}else if(audio_fliter.test(extlist[i])){%>
                            <%="#ext-audio"%>
                            <%}else if(picture_fliter.test(extlist[i])){%>
                            <%="#ext-picture"%>
                            <%}else if(text_fliter.test(extlist[i])){%>
                            <%="#ext-txt"%>
                            <%}else if(compress_fliter.test(extlist[i])){%>
                            <%="#ext-compress"%>
                            <%}else{%>
                            <%="#ext-unknown"%>
                            <%}%>">  
                        </use> 
                        
                    </svg>

                    <li class="file"> 
                        <div class="filename">
                            <%if(filenamelist[i].length>100){%>
                            <% var overflow = (filenamelist[i]).slice(0,100) %>
                            <%= `${overflow}...` %>
                            

                            <%}else{%>
                            <%= filenamelist[i] %>

                            <%}%>
                        </div>

                        <div class="filesize">
                            <% if(sizelist[i]<1024){ %>
                            <%= `${sizelist[i]}B` %>
                            <%}else if(sizelist[i]<Math.pow(1024, 2)){%>
                            <%= `${(sizelist[i]/1024).toFixed(2)}KB`%>
                            <%}else if(sizelist[i]<Math.pow(1024, 3)){%>
                            <%= `${(sizelist[i]/Math.pow(1024, 2)).toFixed(2)}MB`%>
                            <%}else{%>
                            <%= `${(sizelist[i]/Math.pow(1024, 3)).toFixed(2)}GB`%>
                            <%}%>

                        </div>
                    </li>
                </a>
           
            <%}%>
        </ul>
    </div>
</div>


<!-- #ext-video -->
<div id="setting">
    <div id="viewSetting">
        <a href="/view/<% if(view=="gridview"){%><%="listview"%><%}else{%><%="gridview"%><%}%>">
            <div class='button_BG'>
                <div id="grid_view">
                    <img src="/images/svg/gridview.svg"></img>
                </div>
                
                <div id="list_view">
                    <img src="/images/svg/listview.svg"></img>
                </div>
            </div>
        </a>
    </div>

    <div id="uploadSetting" onclick="visible()">
        <a>
            <div class='button_BG' id='uploadButton'>
                <img src="/images/svg/uploadButton.svg">
            </div>
        </a>
    </div>
</div>



<div id="gap"></div>

ÂõæÊ†áÂ±ïÁ§∫Ê°Ü
<svg class="show" aria-hidden="true">
  <use xlink:href="#ext-video"></use>
</svg>

<svg class="show" aria-hidden="true">
  <use xlink:href="#directory"></use>
</svg>

<svg class="show" aria-hidden="true">
  <use xlink:href="#directory_md"></use>
</svg>

ËÆ°Âàí:
ÂõæÊ†áËá™ÂÆö‰πâ
Ê∑±ÊµÖËÉåÊôØÈó¥Èöî

</body>
</html>
