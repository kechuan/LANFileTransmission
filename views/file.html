<!DOCTYPE html>
<html>
<head>
    <title>Â±ÄÂüüÁΩë‰º†Ëæì</title>
    <link rel='stylesheet' href='/stylesheets/font.css'/>
    <link rel="stylesheet" href="/stylesheets/file.css">
    <link rel="stylesheet" id='view' href="/stylesheets/<%= view %>.css">
    <link rel="stylesheet" href="/stylesheets/iconfont/icons.css">
    <link rel="stylesheet" href="/stylesheets/upload.css">


</head>

<body>
    
    <script src='/js/iconfont.js'></script>
    <script src='/js/uploadSetting.js'></script>
    <script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>


<!--Êñá‰ª∂Â§πÊòæÁ§∫ÊïàÊûú-->
<!-- test:D:\\All Local Downloads\\MobileFile -->

    <section class="upload-container" style="visibility: hidden;opacity: 1;">
        <div id="uploadNav">
            <div id="closeUploadButton" onclick="showUploadContainer()" style="opacity: 1;">
                <img src="/images/svg/closeButton.svg">
            </div>
        </div>
        
        <form ref='uploadForm' action="/upload" id='uploadForm' method='post' encType="multipart/form-data">
            <!-- Ë°®Âçï‰∏≠enctype="multipart/form-data"ÁöÑÊÑèÊÄùÔºåÊòØËÆæÁΩÆË°®ÂçïÁöÑMIMEÁºñÁ†Å„ÄÇÈªòËÆ§ÊÉÖÂÜµÔºå
Ëøô‰∏™ÁºñÁ†ÅÊ†ºÂºèÊòØapplication/x-www-form-urlencodedÔºå‰∏çËÉΩÁî®‰∫éÊñá‰ª∂‰∏ä‰º†Ôºõ
Âè™Êúâ‰ΩøÁî®‰∫Ümultipart/form-dataÔºåÊâçËÉΩÂÆåÊï¥ÁöÑ‰º†ÈÄíÊñá‰ª∂Êï∞ÊçÆ. -->
            <div class="drop-zone">
                <div class="icon-container">
                    <img src="/images/svg/uploadFile.svg" draggable="false" class="center" alt="File Icon">
                </div>

                <input type="file" name="Files" id="fileInput" multiple="multiple">
                <input type='submit' value='Upload!' id="fileUpload">

                <div class="title">Drop your Files here or, <span id="browseBtn">browse</span></div>
            </div>
        </form>

        <!-- ËøõÂ∫¶Êù° -->
        <div class="progress-container" style="visibility:hidden;">
            <!-- ËÉåÊôØËøõÂ∫¶ -->

            <div class="bg-progress">
                <!-- Êï∞ÂÄºÂèòÂä®ÁöÑËøõÂ∫¶ -->
                <div class="inner-container">
                    <div class="status">Upload</div>

                    <div class="percent-container">
                        <span class="percentage" id="progressPercent">0%</span>
                    </div>

                </div>
                <div class="progress-bar" style="transform: scaleX(0);"></div>
            </div>
            
        </div>

    </section>

 <div id="nav">
    <div class="name">kechuanÁöÑÊñá‰ª∂ÂàÜ‰∫´È°µÈù¢</div>
    <div class="toolitem">
        <div class="NavUploadProcess">
            <img src="/images/svg/uploadProgress.svg" title="‰∏ä‰º†ËøõÂ∫¶Êù°">
        </div>
        <div class="DisplaySetting">
            <img src="/images/svg/more.svg" title="Êõ¥Â§öËÆæÁΩÆ">
        </div>
        
    </div>
</div>

 <!-- TODO:Admin‰∏ãÁöÑÂà†Èô§ÂäüËÉΩ/ÈÄöËøá::before ::afterÂÆûÁé∞ÂõæÁâáÊú™Âä†ËΩΩÁöÑÂ§ÑÁêÜ <br>
 /ÁªßÊâøÂàáÊç¢ËßÜÂõæÂêéÁöÑscrollview‰ΩçÁΩÆ -->
 <div id="path">
    <!-- (ÂΩìÂâçÂàÜÂâ≤Á¨¶:<%=filepath.split('\\').length-2%> <%=filepath.split('\\')%>) -->
    <a href="/file" id='menu'>Indexüè†</a>
    <ul>
        <% for(var i=0; i<= filepath.split('\\').length-2; i++){ %> 
            <li>
                <%var array = []; var string = []%>

                <a href="http://<%= dataip %>/fileslist?path=<% for(var j=0; j<=i; j++){%><%array.push(filepath.split('\\')[j])%><%string.push(array);string.join('\\')%><%}%><%=string[i].toString().replace(/\,/g,'\\')%>"><%= array[i] %>                  
                </a>
            </li>
            
            <div id="text">/</div> 
        <%}%>
    </ul>
 </div> 
<div id="gap"></div>

<div id="list">
    <div id="status">
        <div class="tiny row-gap"></div>
        <div id="icon">Ôºü</div>
        <div class="tiny row-gap"></div>
        <div id="name">ÂêçÁß∞</div>
        <div class="full row-gap"></div>
        <div id="size">Â§ßÂ∞è</div>

    </div>
    <div id="files">

    <!-- Êñá‰ª∂Â§πÊòæÁ§∫ -->
        <ul id='information'>
            <li id='name'></li>
            <li id='size'></li>
        </ul>

        <ul id='dirlist'>
            <!-- Ê†πÊçÆindex.jsËé∑ÂèñÁöÑÊï∞ÁªÑÈïøÂ∫¶ËøîÂõûÊñá‰ª∂ÂàóË°® -->
            <% for(var i=0; i<= dirlist.length-1; i++){ %>
                <div class="dirsection">
                    <a href="http://<%= dataip %>/fileslist?path=<%= dirlist[i] %>" class="folder" >
                        <svg class="icons" aria-hidden="true">
                          <use xlink:href="#directory_md"></use>
                        </svg>

                        <li class="folder">
                            <div class="dirname"><%= dirnamelist[i] %></div>
                            <div class="filesize">‚Äî</div>   
                        </li>
                    </a>
                </div>
            <%}%>
        </ul>

    <!--Êñá‰ª∂ÊòæÁ§∫-->
        <ul id='fileslist'>
            <% for(var i=0; i<= fileslist.length-1; i++){ %>
                <div class='filesection'>
                    <a href="http://<%= dataip %>/filedownload?path=<%= fileslist[i] %>" class="folder"> 
                        <svg class="icons" aria-hidden="true">
                            <%var video_fliter = /\.mkv|mp4|flv|webv|m2ts|rmvb$/%>
                            <%var audio_fliter = /\.mp3|aac|flac|ogg|opus|aiff|alac|cue$/%>
                            <%var picture_fliter = /\.jpe?g|png|bmp|webp$/%>
                            <%var compress_fliter = /\.zip|rar|7z|\d{3}$/%>
                            <%var text_fliter = /\.txt|md|ini|json|cfg$/%>

                            <use xlink:href="
                                <%if(video_fliter.test(extlist[i])){%>
                                <%="#ext-video"%>
                                <%}else if(audio_fliter.test(extlist[i])){%>
                                <%="#ext-audio"%>
                                <%}else if(picture_fliter.test(extlist[i])){%>
                                <%="#ext-picture"%>
                                <%}else if(text_fliter.test(extlist[i])){%>
                                <%="#ext-txt"%>
                                <%}else if(compress_fliter.test(extlist[i])){%>
                                <%="#ext-compress"%>
                                <%}else{%>
                                <%="#ext-unknown"%>
                                <%}%>">  
                            </use> 
                            
                        </svg>

                        <li class="file"> 
                            <div class="filename">
                                <%if(filenamelist[i].length>120){%>
                                <% var overflow = (filenamelist[i]).slice(0,120) %>
                                <%= `${overflow}...` %>
                                

                                <%}else{%>
                                <%= filenamelist[i] %>

                                <%}%>
                            </div>

                            <div class="filesize">
                                <% if(sizelist[i]<1024){ %>
                                <%= `${sizelist[i]}B` %>
                                <%}else if(sizelist[i]<Math.pow(1024, 2)){%>
                                <%= `${(sizelist[i]/1024).toFixed(2)}KB`%>
                                <%}else if(sizelist[i]<Math.pow(1024, 3)){%>
                                <%= `${(sizelist[i]/Math.pow(1024, 2)).toFixed(2)}MB`%>
                                <%}else{%>
                                <%= `${(sizelist[i]/Math.pow(1024, 3)).toFixed(2)}GB`%>
                                <%}%>

                            </div>
                        </li>
                    </a>
                </div>
           
            <%}%>
        </ul>

        <div id="gap"></div>

    </div>
</div>


<!-- #ext-video -->
<div id="setting" style="visibility:hidden;">
    <div id="viewSetting">
        <a href="/view/<% if(view=="gridview"){%><%="listview"%><%}else{%><%="gridview"%><%}%>">
            <div class='button_BG'>
                <div id="grid_view">
                    <img src="/images/svg/gridview.svg"></img>
                </div>
                
                <div id="list_view">
                    <img src="/images/svg/listview.svg"></img>
                </div>
            </div>
        </a>
    </div>

    <div id="uploadSetting" onclick="showUploadContainer()">
        <a>
            <div class='button_BG' id='uploadButton'>
                <img src="/images/svg/uploadButton.svg">
            </div>
        </a>
    </div>
</div>


ÂõæÊ†áÂ±ïÁ§∫Ê°Ü
<svg class="show" aria-hidden="true">
  <use xlink:href="#ext-video"></use>
</svg>

<svg class="show" aria-hidden="true">
  <use xlink:href="#ext-txt"></use>
</svg>

<svg class="show" aria-hidden="true">
  <use xlink:href="#ext-xls"></use>
</svg>

<svg class="show" aria-hidden="true">
  <use xlink:href="#ext-ppt"></use>
</svg>

<svg class="show" aria-hidden="true">
  <use xlink:href="#ext-picture"></use>
</svg>

<svg class="show" aria-hidden="true">
  <use xlink:href="#ext-compress"></use>
</svg>

<svg class="show" aria-hidden="true">
  <use xlink:href="#ext-unknown"></use>
</svg>

<svg class="show" aria-hidden="true">
  <use xlink:href="#directory"></use>
</svg>

<svg class="show" aria-hidden="true">
  <use xlink:href="#directory_md"></use>
</svg>


<div class="FooterToast" style="visibility:hidden;bottom: 20%;">Sample message</div>

</body>
</html>
