node服务器 基础express框架 以及轻量化lowdb json存储作为轻量化数据库



TODO:

(CSS)

~~重写listview列表的布局~~

<u>实现图片未加载时的替代效果</u>

~~实现上传界面实现~~



*尝试使用其他CSS框架来获得更好的动画效果

****

(功能性)

1.~~实现基础的上传功能~~

~~可拖拽 可多选~~
<u>最好能显示进度条/上传速度 xhr/axios->http/ws request 回应进度条和速度</u>

(介于因为采用了fetch进行上传 导致回应的结果仅有solved,rejected的行为处理

导致大多数监听工具都困难加入进度条监听的功能



不如还是 看看xhr 甚至是axios吧

)

所选的文件大小 

以及对应的ext图标(这个好办)



+~~上传界面应做到可拖拽文件~~ 至少能显示拖拽的文件名字

+上传完毕的反馈(css动画反馈) 至少不要变成导向一个页面然后干巴巴的一句话

直接显示在页面内都好点





2.实现管理模式与其权限对应

Admin下全部功能 全盘访问 自由下载上传 允许编辑模式删除/rename

User下 仅允许访问特定的路径 允许上传

Guest下 仅允许访问特定的路径 禁止上传



-用户模式与开发模式的分离

****

bug

~~从登录页面跳转到首页之后 命令行会报无法设置响应头部的错误~~

重定向添加return提前抛出后就不会再度发生重复设置头部的问题



Low Level:

获取下载文件时会报'ECONNABORTED'的错误 

虽然描写是ABORTED取消下载



但实际上却是多发于大文件的**预备下载**情况

也许是因为现代的下载器**多线程逻辑**原因 让express认为这种预备阻塞下载也是ABORTED的状况



这个错误本身没什么问题 但应该需要更温和的处理 只需要try catch之后用console替代一下就好



+观感不佳 因为实际上是有多个下载器的线程对服务器建立下载内容

因此会一瞬间多出一堆console



有些**下载器线程**甚至还会把末尾的片段提前下载好导致直接抛出succ的响应

这点严格来说应该是下载器的问题 只要设置不预下载就服务器就不会有这问题



不过可惜的是包括我在内的绝大部分人不可能会放弃这种预下载的功能



看看要怎么处理吧..